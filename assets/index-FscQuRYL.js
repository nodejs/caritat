(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const tr="modulepreload",nr=function(e){return"/caritat/"+e},Qt={},rr=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){let s=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var l=s;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),o=f?.nonce||f?.getAttribute("nonce");a=s(n.map(c=>{if(c=nr(c),c in Qt)return;Qt[c]=!0;const h=c.endsWith(".css"),v=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${v}`))return;const u=document.createElement("link");if(u.rel=h?"stylesheet":tr,h||(u.as="script"),u.crossOrigin="",u.href=c,o&&u.setAttribute("nonce",o),document.head.appendChild(u),h)return new Promise((d,m)=>{u.addEventListener("load",d),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(f){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=f,window.dispatchEvent(o),!o.defaultPrevented)throw f}return a.then(f=>{for(const o of f||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})},ir="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(ir);let nt=!1,ar=!1;function lr(){nt=!0}lr();const or=1,sr=2,ur=16,fr=2,cr=4,vr=8,dr=1,hr=2,L=Symbol(),_r="http://www.w3.org/1999/xhtml",pn=!1;var Ft=Array.isArray,pr=Array.prototype.indexOf,Mt=Array.from,Ct=Object.defineProperty,Le=Object.getOwnPropertyDescriptor,mn=Object.getOwnPropertyDescriptors,mr=Object.prototype,yr=Array.prototype,Ut=Object.getPrototypeOf,Xt=Object.isExtensible;function gr(e){return typeof e?.then=="function"}function wr(e){return e()}function dt(e){for(var t=0;t<e.length;t++)e[t]()}function br(){var e,t,n=new Promise((r,a)=>{e=r,t=a});return{promise:n,resolve:e,reject:t}}function Er(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const n=[];for(const r of e)if(n.push(r),n.length===t)break;return n}const K=2,yn=4,Dt=8,rt=16,oe=32,ke=64,gn=128,Y=256,ht=512,U=1024,W=2048,he=4096,X=8192,Ae=16384,$t=32768,qt=65536,Zt=1<<17,xr=1<<18,Bt=1<<19,Vt=1<<20,It=1<<21,jt=1<<22,ye=1<<23,Oe=Symbol("$state"),Sr=Symbol("legacy props"),Ht=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function kr(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function Ar(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Pr(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Tr(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Rr(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Cr(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ir(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Nr(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Lr(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Or(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Fr(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Mr=!1;function wn(e){return e===this.v}function Ur(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function bn(e){return!Ur(e,this.v)}let C=null;function De(e){C=e}function Be(e,t=!1,n){C={p:C,c:null,e:null,s:e,x:null,l:nt&&!t?{s:null,u:null,$:[]}:null}}function Ve(e){var t=C,n=t.e;if(n!==null){t.e=null;for(var r of n)Mn(r)}return C=t.p,{}}function je(){return!nt||C!==null&&C.l===null}const Dr=new WeakMap;function $r(e){var t=b;if(t===null)return E.f|=ye,e;if((t.f&$t)===0){if((t.f&gn)===0)throw!t.parent&&e instanceof Error&&En(e),e;t.b.error(e)}else Kt(e,t)}function Kt(e,t){for(;t!==null;){if((t.f&gn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&En(e),e}function En(e){const t=Dr.get(e);t&&(Ct(e,"message",{value:t.message}),Ct(e,"stack",{value:t.stack}))}let Xe=[],Nt=[];function xn(){var e=Xe;Xe=[],dt(e)}function qr(){var e=Nt;Nt=[],dt(e)}function Sn(e){Xe.length===0&&queueMicrotask(xn),Xe.push(e)}function Br(){Xe.length>0&&xn(),Nt.length>0&&qr()}function Vr(){for(var e=b.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&kr(),e}function zt(e){var t=K|W,n=E!==null&&(E.f&K)!==0?E:null;return b===null||n!==null&&(n.f&Y)!==0?t|=Y:b.f|=Bt,{ctx:C,deps:null,effects:null,equals:wn,f:t,fn:e,reactions:null,rv:0,v:L,wv:0,parent:n??b,ac:null}}function jr(e,t){let n=b;n===null&&Pr();var r=n.b,a=void 0,i=Se(L),l=null,f=!E;return ti(()=>{try{var o=e()}catch(u){o=Promise.reject(u)}var s=()=>o;a=l?.then(s,s)??Promise.resolve(o),l=a;var c=R,h=r.pending;f&&(r.update_pending_count(1),h||c.increment());const v=(u,d=void 0)=>{l=null,h||c.activate(),d?d!==Ht&&(i.f|=ye,we(i,d)):((i.f&ye)!==0&&(i.f^=ye),we(i,u)),f&&(r.update_pending_count(-1),h||c.decrement()),Pn()};if(a.then(v,u=>v(null,u||"unknown")),c)return()=>{queueMicrotask(()=>c.neuter())}}),new Promise(o=>{function s(c){function h(){c===a?o(i):s(a)}c.then(h,h)}s(a)})}function Gt(e){const t=zt(e);return t.equals=bn,t}function kn(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)le(t[n])}}function Hr(e){for(var t=e.parent;t!==null;){if((t.f&K)===0)return t;t=t.parent}return null}function Yt(e){var t,n=b;re(Hr(e));try{kn(e),t=Kn(e)}finally{re(n)}return t}function An(e){var t=Yt(e);if(e.equals(t)||(e.v=t,e.wv=jn()),!Pe)if($e!==null)$e.set(e,e.v);else{var n=(fe||(e.f&Y)!==0)&&e.deps!==null?he:U;q(e,n)}}function Kr(e,t,n){const r=je()?zt:Gt;if(t.length===0){n(e.map(r));return}var a=R,i=b,l=zr(),f=Vr();Promise.all(t.map(o=>jr(o))).then(o=>{a?.activate(),l();try{n([...e.map(r),...o])}catch(s){(i.f&Ae)===0&&Kt(s,i)}a?.deactivate(),Pn()}).catch(o=>{f.error(o)})}function zr(){var e=b,t=E,n=C;return function(){re(e),J(t),De(n)}}function Pn(){re(null),J(null),De(null)}const Ge=new Set;let R=null,$e=null,en=new Set,_t=[];function Tn(){const e=_t.shift();_t.length>0&&queueMicrotask(Tn),e()}let Ee=[],gt=null,Lt=!1,ct=!1;class qe{current=new Map;#i=new Map;#a=new Set;#e=0;#u=null;#f=!1;#n=[];#l=[];#r=[];#t=[];#o=[];#c=[];#v=[];skipped_effects=new Set;process(t){Ee=[];var n=null;if(Ge.size>1){n=new Map,$e=new Map;for(const[i,l]of this.current)n.set(i,{v:i.v,wv:i.wv}),i.v=l;for(const i of Ge)if(i!==this)for(const[l,f]of i.#i)n.has(l)||(n.set(l,{v:l.v,wv:l.wv}),l.v=f)}for(const i of t)this.#h(i);if(this.#n.length===0&&this.#e===0){this.#d();var r=this.#r,a=this.#t;this.#r=[],this.#t=[],this.#o=[],R=null,tn(r),tn(a),R===null?R=this:Ge.delete(this),this.#u?.resolve()}else this.#s(this.#r),this.#s(this.#t),this.#s(this.#o);if(n){for(const[i,{v:l,wv:f}]of n)i.wv<=f&&(i.v=l);$e=null}for(const i of this.#n)Je(i);for(const i of this.#l)Je(i);this.#n=[],this.#l=[]}#h(t){t.f^=U;for(var n=t.first;n!==null;){var r=n.f,a=(r&(oe|ke))!==0,i=a&&(r&U)!==0,l=i||(r&X)!==0||this.skipped_effects.has(n);if(!l&&n.fn!==null){if(a)n.f^=U;else if((r&U)===0)if((r&yn)!==0)this.#t.push(n);else if((r&jt)!==0){var f=n.b?.pending?this.#l:this.#n;f.push(n)}else bt(n)&&((n.f&rt)!==0&&this.#o.push(n),Je(n));var o=n.first;if(o!==null){n=o;continue}}var s=n.parent;for(n=n.next;n===null&&s!==null;)n=s.next,s=s.parent}}#s(t){for(const n of t)((n.f&W)!==0?this.#c:this.#v).push(n),q(n,U);t.length=0}capture(t,n){this.#i.has(t)||this.#i.set(t,n),this.current.set(t,t.v)}activate(){R=this}deactivate(){R=null;for(const t of en)if(en.delete(t),t(),R!==null)break}neuter(){this.#f=!0}flush(){Ee.length>0?Rn():this.#d(),R===this&&(this.#e===0&&Ge.delete(this),this.deactivate())}#d(){if(!this.#f)for(const t of this.#a)t();this.#a.clear()}increment(){this.#e+=1}decrement(){if(this.#e-=1,this.#e===0){for(const t of this.#c)q(t,W),xe(t);for(const t of this.#v)q(t,he),xe(t);this.#r=[],this.#t=[],this.flush()}else this.deactivate()}add_callback(t){this.#a.add(t)}settled(){return(this.#u??=br()).promise}static ensure(){if(R===null){const t=R=new qe;Ge.add(R),ct||qe.enqueue(()=>{R===t&&t.flush()})}return R}static enqueue(t){_t.length===0&&queueMicrotask(Tn),_t.unshift(t)}}function Gr(e){var t=ct;ct=!0;try{for(var n;;){if(Br(),Ee.length===0&&(R?.flush(),Ee.length===0))return gt=null,n;Rn()}}finally{ct=t}}function Rn(){var e=Ue;Lt=!0;try{var t=0;for(an(!0);Ee.length>0;){var n=qe.ensure();if(t++>1e3){var r,a;Yr()}n.process(Ee),ge.clear()}}finally{Lt=!1,an(e),gt=null}}function Yr(){try{Ir()}catch(e){Kt(e,gt)}}function tn(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Ae|X))===0&&bt(r)){var a=R?R.current.size:0;if(Je(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?$n(r):r.fn=null),R!==null&&R.current.size>a&&(r.f&Vt)!==0)break}}for(;n<t;)xe(e[n++])}}function xe(e){for(var t=gt=e;t.parent!==null;){t=t.parent;var n=t.f;if(Lt&&t===b&&(n&rt)!==0)return;if((n&(ke|oe))!==0){if((n&U)===0)return;t.f^=U}}Ee.push(t)}const ge=new Map;function Se(e,t){var n={f:0,v:e,reactions:null,equals:wn,rv:0,wv:0};return n}function ue(e,t){const n=Se(e);return ii(n),n}function D(e,t=!1,n=!0){const r=Se(e);return t||(r.equals=bn),nt&&n&&C!==null&&C.l!==null&&(C.l.s??=[]).push(r),r}function A(e,t,n=!1){E!==null&&(!ne||(E.f&Zt)!==0)&&je()&&(E.f&(K|rt|jt|Zt))!==0&&!ae?.includes(e)&&Fr();let r=n?Ne(t):t;return we(e,r)}function we(e,t){if(!e.equals(t)){var n=e.v;Pe?ge.set(e,t):ge.set(e,n),e.v=t;var r=qe.ensure();r.capture(e,n),(e.f&K)!==0&&((e.f&W)!==0&&Yt(e),q(e,(e.f&Y)===0?U:he)),e.wv=jn(),Cn(e,W),je()&&b!==null&&(b.f&U)!==0&&(b.f&(oe|ke))===0&&(z===null?ai([e]):z.push(e))}return t}function kt(e){A(e,e.v+1)}function Cn(e,t){var n=e.reactions;if(n!==null)for(var r=je(),a=n.length,i=0;i<a;i++){var l=n[i],f=l.f;if(!(!r&&l===b)){var o=(f&W)===0;o&&q(l,t),(f&K)!==0?Cn(l,he):o&&xe(l)}}}function Ne(e){if(typeof e!="object"||e===null||Oe in e)return e;const t=Ut(e);if(t!==mr&&t!==yr)return e;var n=new Map,r=Ft(e),a=ue(0),i=be,l=f=>{if(be===i)return f();var o=E,s=be;J(null),on(i);var c=f();return J(o),on(s),c};return r&&n.set("length",ue(e.length)),new Proxy(e,{defineProperty(f,o,s){(!("value"in s)||s.configurable===!1||s.enumerable===!1||s.writable===!1)&&Lr();var c=n.get(o);return c===void 0?c=l(()=>{var h=ue(s.value);return n.set(o,h),h}):A(c,s.value,!0),!0},deleteProperty(f,o){var s=n.get(o);if(s===void 0){if(o in f){const c=l(()=>ue(L));n.set(o,c),kt(a)}}else A(s,L),kt(a);return!0},get(f,o,s){if(o===Oe)return e;var c=n.get(o),h=o in f;if(c===void 0&&(!h||Le(f,o)?.writable)&&(c=l(()=>{var u=Ne(h?f[o]:L),d=ue(u);return d}),n.set(o,c)),c!==void 0){var v=y(c);return v===L?void 0:v}return Reflect.get(f,o,s)},getOwnPropertyDescriptor(f,o){var s=Reflect.getOwnPropertyDescriptor(f,o);if(s&&"value"in s){var c=n.get(o);c&&(s.value=y(c))}else if(s===void 0){var h=n.get(o),v=h?.v;if(h!==void 0&&v!==L)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return s},has(f,o){if(o===Oe)return!0;var s=n.get(o),c=s!==void 0&&s.v!==L||Reflect.has(f,o);if(s!==void 0||b!==null&&(!c||Le(f,o)?.writable)){s===void 0&&(s=l(()=>{var v=c?Ne(f[o]):L,u=ue(v);return u}),n.set(o,s));var h=y(s);if(h===L)return!1}return c},set(f,o,s,c){var h=n.get(o),v=o in f;if(r&&o==="length")for(var u=s;u<h.v;u+=1){var d=n.get(u+"");d!==void 0?A(d,L):u in f&&(d=l(()=>ue(L)),n.set(u+"",d))}if(h===void 0)(!v||Le(f,o)?.writable)&&(h=l(()=>ue(void 0)),A(h,Ne(s)),n.set(o,h));else{v=h.v!==L;var m=l(()=>Ne(s));A(h,m)}var g=Reflect.getOwnPropertyDescriptor(f,o);if(g?.set&&g.set.call(c,s),!v){if(r&&typeof o=="string"){var w=n.get("length"),_=Number(o);Number.isInteger(_)&&_>=w.v&&A(w,_+1)}kt(a)}return!0},ownKeys(f){y(a);var o=Reflect.ownKeys(f).filter(h=>{var v=n.get(h);return v===void 0||v.v!==L});for(var[s,c]of n)c.v!==L&&!(s in f)&&o.push(s);return o},setPrototypeOf(){Or()}})}var nn,In,Nn,Ln;function Wr(){if(nn===void 0){nn=window,In=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Nn=Le(t,"firstChild").get,Ln=Le(t,"nextSibling").get,Xt(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Xt(n)&&(n.__t=void 0)}}function He(e=""){return document.createTextNode(e)}function pt(e){return Nn.call(e)}function wt(e){return Ln.call(e)}function P(e,t){return pt(e)}function Z(e,t){{var n=pt(e);return n instanceof Comment&&n.data===""?wt(n):n}}function k(e,t=1,n=!1){let r=e;for(;t--;)r=wt(r);return r}function Jr(e){e.textContent=""}function On(){return!1}function Fn(e){b===null&&E===null&&Cr(),E!==null&&(E.f&Y)!==0&&b===null&&Rr(),Pe&&Tr()}function Qr(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function _e(e,t,n,r=!0){var a=b;a!==null&&(a.f&X)!==0&&(e|=X);var i={ctx:C,deps:null,nodes_start:null,nodes_end:null,f:e|W,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Je(i),i.f|=$t}catch(o){throw le(i),o}else t!==null&&xe(i);var l=n&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&Bt)===0;if(!l&&r&&(a!==null&&Qr(i,a),E!==null&&(E.f&K)!==0&&(e&ke)===0)){var f=E;(f.effects??=[]).push(i)}return i}function Xr(e){const t=_e(Dt,null,!1);return q(t,U),t.teardown=e,t}function rn(e){Fn();var t=b.f,n=!E&&(t&oe)!==0&&(t&$t)===0;if(n){var r=C;(r.e??=[]).push(e)}else return Mn(e)}function Mn(e){return _e(yn|Vt,e,!1)}function Zr(e){return Fn(),_e(Dt|Vt,e,!0)}function ei(e){qe.ensure();const t=_e(ke,e,!0);return(n={})=>new Promise(r=>{n.outro?Fe(t,()=>{le(t),r(void 0)}):(le(t),r(void 0))})}function ti(e){return _e(jt|Bt,e,!0)}function H(e,t=[],n=[]){Kr(t,n,r=>{_e(Dt,()=>e(...r.map(y)),!0)})}function Wt(e,t=0){var n=_e(rt|t,e,!0);return n}function ve(e,t=!0){return _e(oe,e,!0,t)}function Un(e){var t=e.teardown;if(t!==null){const n=Pe,r=E;ln(!0),J(null);try{t.call(null)}finally{ln(n),J(r)}}}function Dn(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){n.ac?.abort(Ht);var r=n.next;(n.f&ke)!==0?n.parent=null:le(n,t),n=r}}function ni(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&oe)===0&&le(t),t=n}}function le(e,t=!0){var n=!1;(t||(e.f&xr)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(ri(e.nodes_start,e.nodes_end),n=!0),Dn(e,t&&!n),mt(e,0),q(e,Ae);var r=e.transitions;if(r!==null)for(const i of r)i.stop();Un(e);var a=e.parent;a!==null&&a.first!==null&&$n(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function ri(e,t){for(;e!==null;){var n=e===t?null:wt(e);e.remove(),e=n}}function $n(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Fe(e,t){var n=[];Jt(e,n,!0),qn(n,()=>{le(e),t&&t()})}function qn(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var a of e)a.out(r)}else t()}function Jt(e,t,n){if((e.f&X)===0){if(e.f^=X,e.transitions!==null)for(const l of e.transitions)(l.is_global||n)&&t.push(l);for(var r=e.first;r!==null;){var a=r.next,i=(r.f&qt)!==0||(r.f&oe)!==0;Jt(r,t,i?n:!1),r=a}}}function Me(e){Bn(e,!0)}function Bn(e,t){if((e.f&X)!==0){e.f^=X,(e.f&U)===0&&(q(e,W),xe(e));for(var n=e.first;n!==null;){var r=n.next,a=(n.f&qt)!==0||(n.f&oe)!==0;Bn(n,a?t:!1),n=r}if(e.transitions!==null)for(const i of e.transitions)(i.is_global||t)&&i.in()}}let Ue=!1;function an(e){Ue=e}let Pe=!1;function ln(e){Pe=e}let E=null,ne=!1;function J(e){E=e}let b=null;function re(e){b=e}let ae=null;function ii(e){E!==null&&(ae===null?ae=[e]:ae.push(e))}let $=null,V=0,z=null;function ai(e){z=e}let Vn=1,Ze=0,be=Ze;function on(e){be=e}let fe=!1;function jn(){return++Vn}function bt(e){var t=e.f;if((t&W)!==0)return!0;if((t&he)!==0){var n=e.deps,r=(t&Y)!==0;if(n!==null){var a,i,l=(t&ht)!==0,f=r&&b!==null&&!fe,o=n.length;if((l||f)&&(b===null||(b.f&Ae)===0)){var s=e,c=s.parent;for(a=0;a<o;a++)i=n[a],(l||!i?.reactions?.includes(s))&&(i.reactions??=[]).push(s);l&&(s.f^=ht),f&&c!==null&&(c.f&Y)===0&&(s.f^=Y)}for(a=0;a<o;a++)if(i=n[a],bt(i)&&An(i),i.wv>e.wv)return!0}(!r||b!==null&&!fe)&&q(e,U)}return!1}function Hn(e,t,n=!0){var r=e.reactions;if(r!==null&&!ae?.includes(e))for(var a=0;a<r.length;a++){var i=r[a];(i.f&K)!==0?Hn(i,t,!1):t===i&&(n?q(i,W):(i.f&U)!==0&&q(i,he),xe(i))}}function Kn(e){var t=$,n=V,r=z,a=E,i=fe,l=ae,f=C,o=ne,s=be,c=e.f;$=null,V=0,z=null,fe=(c&Y)!==0&&(ne||!Ue||E===null),E=(c&(oe|ke))===0?e:null,ae=null,De(e.ctx),ne=!1,be=++Ze,e.ac!==null&&(e.ac.abort(Ht),e.ac=null);try{e.f|=It;var h=(0,e.fn)(),v=e.deps;if($!==null){var u;if(mt(e,V),v!==null&&V>0)for(v.length=V+$.length,u=0;u<$.length;u++)v[V+u]=$[u];else e.deps=v=$;if(!fe||(c&K)!==0&&e.reactions!==null)for(u=V;u<v.length;u++)(v[u].reactions??=[]).push(e)}else v!==null&&V<v.length&&(mt(e,V),v.length=V);if(je()&&z!==null&&!ne&&v!==null&&(e.f&(K|he|W))===0)for(u=0;u<z.length;u++)Hn(z[u],e);return a!==null&&a!==e&&(Ze++,z!==null&&(r===null?r=z:r.push(...z))),(e.f&ye)!==0&&(e.f^=ye),h}catch(d){return $r(d)}finally{e.f^=It,$=t,V=n,z=r,E=a,fe=i,ae=l,De(f),ne=o,be=s}}function li(e,t){let n=t.reactions;if(n!==null){var r=pr.call(n,e);if(r!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(t.f&K)!==0&&($===null||!$.includes(t))&&(q(t,he),(t.f&(Y|ht))===0&&(t.f^=ht),kn(t),mt(t,0))}function mt(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)li(e,n[r])}function Je(e){var t=e.f;if((t&Ae)===0){q(e,U);var n=b,r=Ue;b=e,Ue=!0;try{(t&rt)!==0?ni(e):Dn(e),Un(e);var a=Kn(e);e.teardown=typeof a=="function"?a:null,e.wv=Vn;var i;pn&&ar&&(e.f&W)!==0&&e.deps}finally{Ue=r,b=n}}}function y(e){var t=e.f,n=(t&K)!==0;if(E!==null&&!ne){var r=b!==null&&(b.f&Ae)!==0;if(!r&&!ae?.includes(e)){var a=E.deps;if((E.f&It)!==0)e.rv<Ze&&(e.rv=Ze,$===null&&a!==null&&a[V]===e?V++:$===null?$=[e]:(!fe||!$.includes(e))&&$.push(e));else{(E.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[E]:i.includes(E)||i.push(E)}}}else if(n&&e.deps===null&&e.effects===null){var l=e,f=l.parent;f!==null&&(f.f&Y)===0&&(l.f^=Y)}if(Pe){if(ge.has(e))return ge.get(e);if(n){l=e;var o=l.v;return((l.f&U)===0&&l.reactions!==null||zn(l))&&(o=Yt(l)),ge.set(l,o),o}}else if(n){if(l=e,$e?.has(l))return $e.get(l);bt(l)&&An(l)}if((e.f&ye)!==0)throw e.v;return e.v}function zn(e){if(e.v===L)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(ge.has(t)||(t.f&K)!==0&&zn(t))return!0;return!1}function G(e){var t=ne;try{return ne=!0,e()}finally{ne=t}}const oi=-7169;function q(e,t){e.f=e.f&oi|t}function j(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Oe in e)Ot(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Oe in n&&Ot(n)}}}function Ot(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Ot(e[r],t)}catch{}const n=Ut(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=mn(n);for(let a in r){const i=r[a].get;if(i)try{i.call(e)}catch{}}}}}function si(e){var t=E,n=b;J(null),re(null);try{return e()}finally{J(t),re(n)}}const ui=new Set,sn=new Set;function fi(e,t,n,r={}){function a(i){if(r.capture||Ye.call(t,i),!i.cancelBubble)return si(()=>n?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Sn(()=>{t.addEventListener(e,a,r)}):t.addEventListener(e,a,r),a}function it(e,t,n,r,a){var i={capture:r,passive:a},l=fi(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Xr(()=>{t.removeEventListener(e,l,i)})}let un=null;function Ye(e){var t=this,n=t.ownerDocument,r=e.type,a=e.composedPath?.()||[],i=a[0]||e.target;un=e;var l=0,f=un===e&&e.__root;if(f){var o=a.indexOf(f);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var s=a.indexOf(t);if(s===-1)return;o<=s&&(l=o)}if(i=a[l]||e.target,i!==t){Ct(e,"currentTarget",{configurable:!0,get(){return i||n}});var c=E,h=b;J(null),re(null);try{for(var v,u=[];i!==null;){var d=i.assignedSlot||i.parentNode||i.host||null;try{var m=i["__"+r];if(m!=null&&(!i.disabled||e.target===i))if(Ft(m)){var[g,...w]=m;g.apply(i,[e,...w])}else m.call(i,e)}catch(_){v?u.push(_):v=_}if(e.cancelBubble||d===t||d===null)break;i=d}if(v){for(let _ of u)queueMicrotask(()=>{throw _});throw v}}finally{e.__root=t,delete e.currentTarget,J(c),re(h)}}}function ci(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function yt(e,t){var n=b;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function T(e,t){var n=(t&dr)!==0,r=(t&hr)!==0,a,i=!e.startsWith("<!>");return()=>{a===void 0&&(a=ci(i?e:"<!>"+e),n||(a=pt(a)));var l=r||In?document.importNode(a,!0):a.cloneNode(!0);if(n){var f=pt(l),o=l.lastChild;yt(f,o)}else yt(l,l);return l}}function We(e=""){{var t=He(e+"");return yt(t,t),t}}function vi(){var e=document.createDocumentFragment(),t=document.createComment(""),n=He();return e.append(t,n),yt(t,n),e}function S(e,t){e!==null&&e.before(t)}const di=["touchstart","touchmove"];function hi(e){return di.includes(e)}function ce(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function _i(e,t){return pi(e,t)}const Re=new Map;function pi(e,{target:t,anchor:n,props:r={},events:a,context:i,intro:l=!0}){Wr();var f=new Set,o=h=>{for(var v=0;v<h.length;v++){var u=h[v];if(!f.has(u)){f.add(u);var d=hi(u);t.addEventListener(u,Ye,{passive:d});var m=Re.get(u);m===void 0?(document.addEventListener(u,Ye,{passive:d}),Re.set(u,1)):Re.set(u,m+1)}}};o(Mt(ui)),sn.add(o);var s=void 0,c=ei(()=>{var h=n??t.appendChild(He());return ve(()=>{if(i){Be({});var v=C;v.c=i}a&&(r.$$events=a),s=e(h,r)||{},i&&Ve()}),()=>{for(var v of f){t.removeEventListener(v,Ye);var u=Re.get(v);--u===0?(document.removeEventListener(v,Ye),Re.delete(v)):Re.set(v,u)}sn.delete(o),h!==n&&h.parentNode?.removeChild(h)}});return mi.set(s,c),s}let mi=new WeakMap;function Gn(e){C===null&&Ar(),C.l===null&&Nr(),yi(C).b.push(e)}function yi(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const At=0,ot=1,Pt=2;function et(e,t,n,r,a){var i=e,l=je(),f=C,o=L,s,c,h,v=l?Se(void 0):D(void 0,!1,!1),u=l?Se(void 0):D(void 0,!1,!1),d=!1;function m(w,_){d=!0,_&&(re(g),J(g),De(f));try{w===At&&n&&(s?Me(s):s=ve(()=>n(i))),w===ot&&r&&(c?Me(c):c=ve(()=>r(i,v))),w===Pt&&a&&(h?Me(h):h=ve(()=>a(i,u))),w!==At&&s&&Fe(s,()=>s=null),w!==ot&&c&&Fe(c,()=>c=null),w!==Pt&&h&&Fe(h,()=>h=null)}finally{_&&(De(null),J(null),re(null),Gr())}}var g=Wt(()=>{if(o!==(o=t())){if(gr(o)){var w=o;d=!1,w.then(_=>{w===o&&(we(v,_),m(ot,!0))},_=>{if(w===o&&(we(u,_),m(Pt,!0),!a))throw u.v}),Sn(()=>{d||m(At,!0)})}else we(v,o),m(ot,!1);return()=>o=L}})}function Qe(e,t,n=!1){var r=e,a=null,i=null,l=L,f=n?qt:0,o=!1;const s=(u,d=!0)=>{o=!0,v(d,u)};var c=null;function h(){c!==null&&(c.lastChild.remove(),r.before(c),c=null);var u=l?a:i,d=l?i:a;u&&Me(u),d&&Fe(d,()=>{l?i=null:a=null})}const v=(u,d)=>{if(l!==(l=u)){var m=On(),g=r;if(m&&(c=document.createDocumentFragment(),c.append(g=He())),l?a??=d&&ve(()=>d(g)):i??=d&&ve(()=>d(g)),m){var w=R,_=l?a:i,p=l?i:a;_&&w.skipped_effects.delete(_),p&&w.skipped_effects.add(p),w.add_callback(h)}else h()}};Wt(()=>{o=!1,t(s),o||v(null,null)},f)}function fn(e,t){return t}function gi(e,t,n){for(var r=e.items,a=[],i=t.length,l=0;l<i;l++)Jt(t[l].e,a,!0);var f=i>0&&a.length===0&&n!==null;if(f){var o=n.parentNode;Jr(o),o.append(n),r.clear(),te(e,t[0].prev,t[i-1].next)}qn(a,()=>{for(var s=0;s<i;s++){var c=t[s];f||(r.delete(c.k),te(e,c.prev,c.next)),le(c.e,!f)}})}function cn(e,t,n,r,a,i=null){var l=e,f={flags:t,items:new Map,first:null};{var o=e;l=o.appendChild(He())}var s=null,c=!1,h=new Map,v=Gt(()=>{var g=n();return Ft(g)?g:g==null?[]:Mt(g)}),u,d;function m(){wi(d,u,f,h,l,a,t,r,n),i!==null&&(u.length===0?s?Me(s):s=ve(()=>i(l)):s!==null&&Fe(s,()=>{s=null}))}Wt(()=>{d??=b,u=y(v);var g=u.length;if(!(c&&g===0)){c=g===0;var w,_,p,x;if(On()){var I=new Set,B=R;for(_=0;_<g;_+=1){p=u[_],x=r(p,_);var O=f.items.get(x)??h.get(x);O?Yn(O,p,_):(w=Wn(null,f,null,null,p,x,_,a,t,n,!0),h.set(x,w)),I.add(x)}for(const[F,N]of f.items)I.has(F)||B.skipped_effects.add(N.e);B.add_callback(m)}else m();y(v)}})}function wi(e,t,n,r,a,i,l,f,o){var s=t.length,c=n.items,h=n.first,v=h,u,d=null,m=[],g=[],w,_,p,x;for(x=0;x<s;x+=1){if(w=t[x],_=f(w,x),p=c.get(_),p===void 0){var I=r.get(_);if(I!==void 0){r.delete(_),c.set(_,I);var B=d?d.next:v;te(n,d,I),te(n,I,B),Tt(I,B,a),d=I}else{var O=v?v.e.nodes_start:a;d=Wn(O,n,d,d===null?n.first:d.next,w,_,x,i,l,o)}c.set(_,d),m=[],g=[],v=d.next;continue}if(Yn(p,w,x),(p.e.f&X)!==0&&Me(p.e),p!==v){if(u!==void 0&&u.has(p)){if(m.length<g.length){var F=g[0],N;d=F.prev;var pe=m[0],se=m[m.length-1];for(N=0;N<m.length;N+=1)Tt(m[N],F,a);for(N=0;N<g.length;N+=1)u.delete(g[N]);te(n,pe.prev,se.next),te(n,d,pe),te(n,se,F),v=F,d=se,x-=1,m=[],g=[]}else u.delete(p),Tt(p,v,a),te(n,p.prev,p.next),te(n,p,d===null?n.first:d.next),te(n,d,p),d=p;continue}for(m=[],g=[];v!==null&&v.k!==_;)(v.e.f&X)===0&&(u??=new Set).add(v),g.push(v),v=v.next;if(v===null)continue;p=v}m.push(p),d=p,v=p.next}if(v!==null||u!==void 0){for(var Ke=u===void 0?[]:Mt(u);v!==null;)(v.e.f&X)===0&&Ke.push(v),v=v.next;var M=Ke.length;if(M>0){var ie=s===0?a:null;gi(n,Ke,ie)}}e.first=n.first&&n.first.e,e.last=d&&d.e;for(var ee of r.values())le(ee.e);r.clear()}function Yn(e,t,n,r){we(e.v,t),e.i=n}function Wn(e,t,n,r,a,i,l,f,o,s,c){var h=(o&or)!==0,v=(o&ur)===0,u=h?v?D(a,!1,!1):Se(a):a,d=(o&sr)===0?l:Se(l),m={i:d,v:u,k:i,a:null,e:null,prev:n,next:r};try{if(e===null){var g=document.createDocumentFragment();g.append(e=He())}return m.e=ve(()=>f(e,u,d,s),Mr),m.e.prev=n&&n.e,m.e.next=r&&r.e,n===null?c||(t.first=m):(n.next=m,n.e.next=m.e),r!==null&&(r.prev=m,r.e.prev=m.e),m}finally{}}function Tt(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,a=t?t.e.nodes_start:n,i=e.e.nodes_start;i!==null&&i!==r;){var l=wt(i);a.before(i),i=l}}function te(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}const bi=Symbol("is custom element"),Ei=Symbol("is html");function tt(e,t){var n=Jn(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function xi(e,t,n,r){var a=Jn(e);a[t]!==(a[t]=n)&&(n==null?e.removeAttribute(t):typeof n!="string"&&Si(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Jn(e){return e.__attributes??={[bi]:e.nodeName.includes("-"),[Ei]:e.namespaceURI===_r}}var vn=new Map;function Si(e){var t=vn.get(e.nodeName);if(t)return t;vn.set(e.nodeName,t=[]);for(var n,r=e,a=Element.prototype;a!==r;){n=mn(r);for(var i in n)n[i].set&&t.push(i);r=Ut(r)}return t}function at(e=!1){const t=C,n=t.l.u;if(!n)return;let r=()=>j(t.s);if(e){let a=0,i={};const l=zt(()=>{let f=!1;const o=t.s;for(const s in o)o[s]!==i[s]&&(i[s]=o[s],f=!0);return f&&a++,a});r=()=>y(l)}n.b.length&&Zr(()=>{dn(t,r),dt(n.b)}),rn(()=>{const a=G(()=>n.m.map(wr));return()=>{for(const i of a)typeof i=="function"&&i()}}),n.a.length&&rn(()=>{dn(t,r),dt(n.a)})}function dn(e,t){if(e.l.s)for(const n of e.l.s)y(n);t()}let st=!1;function ki(e){var t=st;try{return st=!1,[e(),st]}finally{st=t}}function Q(e,t,n,r){var a=!nt||(n&fr)!==0,i=(n&vr)!==0,l=r,f=!0,o=()=>(f&&(f=!1,l=r),l),s;{var c=Oe in e||Sr in e;s=Le(e,t)?.set??(c&&t in e?_=>e[t]=_:void 0)}var h,v=!1;[h,v]=ki(()=>e[t]);var u;if(a?u=()=>{var _=e[t];return _===void 0?o():(f=!0,_)}:u=()=>{var _=e[t];return _!==void 0&&(l=void 0),_===void 0?l:_},a&&(n&cr)===0)return u;if(s){var d=e.$$legacy;return function(_,p){return arguments.length>0?((!a||!p||d||v)&&s(p?u():_),_):u()}}var m=!1,g=Gt(()=>(m=!1,u()));y(g);var w=b;return function(_,p){if(arguments.length>0){const x=p?y(g):a&&i?Ne(_):_;return A(g,x),m=!0,l!==void 0&&(l=x),_}return Pe&&m||(w.f&Ae)!==0?g.v:y(g)}}var Ai=T("<li> </li>"),Pi=T('<details open class="svelte-r9mgq3"><summary class="svelte-r9mgq3">Your ballot is missing some candidates</summary> <ul></ul> <p>Only ballots setting scores for all candidates will be taken into account.</p> <p><em>Hint: it could be due to a typo or a failed copy-pasting.</em></p> <hr/></details>'),Ti=T("<li> </li>"),Ri=T('<details open class="svelte-r9mgq3"><summary class="svelte-r9mgq3">Your ballot contains invalid scores</summary> <ul></ul> <p>Use only "safe" integers, i.e. values that can be represented as an IEEE-754 double precision number.</p> <hr/></details>'),Ci=T("<!> <!>",1),Ii=T(`<details open class="svelte-r9mgq3"><summary class="svelte-r9mgq3">We failed to check your ballot</summary> <p>Something wrong happened when trying to check the ballot validity; it doesn't mean your ballot is invalid, we just can't tell.</p> <p><em>Hint: authenticated API calls are more likely to succeed.</em></p> <hr/></details>`),Ni=T('<!> <pre class="svelte-r9mgq3"> </pre>',1),Li=T('<textarea readonly="">Getting summary… </textarea>'),Oi=T("<summary>Ballot summary (requires downloading YAML parser)</summary> <!>",1);function Fi(e,t){let n=Q(t,"ballotSummary",8);var r=Oi(),a=k(Z(r),2);et(a,n,i=>{var l=Li();S(i,l)},(i,l)=>{var f=Ni(),o=Z(f);{var s=u=>{var d=Ci(),m=Z(d);{var g=p=>{var x=Pi(),I=k(P(x),2);cn(I,5,()=>(j(y(l)),G(()=>y(l)[1].missingCandidates)),fn,(B,O)=>{var F=Ai(),N=P(F);H(()=>ce(N,y(O))),S(B,F)}),S(p,x)};Qe(m,p=>{j(y(l)),G(()=>y(l)[1].missingCandidates?.length)&&p(g)})}var w=k(m,2);{var _=p=>{var x=Ri(),I=k(P(x),2);cn(I,5,()=>(j(y(l)),G(()=>y(l)[1].candidatesWithInvalidScores)),fn,(B,O)=>{let F=()=>y(O).title,N=()=>y(O).score;var pe=Ti(),se=P(pe);H(()=>ce(se,`${N()??""} for ${F()??""}`)),S(B,pe)}),S(p,x)};Qe(w,p=>{j(y(l)),G(()=>y(l)[1].candidatesWithInvalidScores?.length)&&p(_)})}S(u,d)},c=u=>{var d=Ii();S(u,d)};Qe(o,u=>{j(y(l)),G(()=>y(l)[1])?u(s):u(c,!1)})}var h=k(o,2),v=P(h);H(()=>ce(v,(j(y(l)),G(()=>y(l)[0])))),S(i,f)},(i,l)=>{var f=We();H(o=>ce(f,`An error occurred: ${o??""}`),[()=>(j(y(l)),G(()=>console.log(y(l))??y(l)?.message??y(l)))]),S(i,f)}),S(e,r)}const Mi=/^\/([^/]+)\/([^/]+)\/pull\/(\d+)\/?$/,Ui=/\npreferences:[^\n\S]*(#[^\n]*)?\n/,ut=e=>e.ok?e.json():Promise.reject(new Error(`Fetch error: ${e.status} ${e.statusText}`,{cause:e})),Qn=new Map;async function Di(e,t){const n=new URL(e);if(n.origin!=="https://github.com")throw new Error("Only GitHub PR URLs are supported on the web UI. Use the CLI instead.");const r=Mi.exec(n.pathname);if(r==null)throw new Error("Only GitHub PR URLs are supported on the web UI. Use the CLI instead.");const[,a,i,l]=r;let f;if(t?.headers?.Authorization){const p=await fetch("https://api.github.com/graphql",{...t,method:"POST",body:JSON.stringify({variables:{prid:Number(l),owner:a,repo:i},query:`query PR($prid: Int!, $owner: String!, $repo: String!) {
        repository(owner: $owner, name: $repo) {
          pullRequest(number: $prid) {
            commits(first: 1) {
              nodes {
                commit {
                  oid
                }
              }
            }
            headRef {
              name
              repository { url }
            }
            closed
            merged
          }
        }
      }
`})}).then(ut);if(p.error)throw new Error("Unable to get required information for the vote PR",{cause:p.error});f=p.data.repository.pullRequest}else{const p=await Promise.all([fetch(`https://api.github.com/repos/${a}/${i}/pulls/${l}`,t).then(ut),fetch(`https://api.github.com/repos/${a}/${i}/pulls/${l}/commits?per_page=1`,t).then(ut)]);f={closed:p[0].state==="closed",merged:p[0].state==="merged",headRef:{name:p[0].head.ref,repository:{url:p[0].head.repo.html_url}},commits:{nodes:[{commit:{oid:p[1][0].sha}}]}}}const{closed:o,merged:s,commits:c,headRef:h}=f;if(o)throw new Error("The PR is marked as closed");if(s)throw new Error("The PR is marked as merged");const{oid:v}=c.nodes[0].commit,{name:u,repository:{url:d}}=h,{files:m}=await fetch(`https://api.github.com/repos/${a}/${i}/commits/${v}`,t).then(ut);if(m?.length!==3)throw new Error("That PR does not look like a vote PR");const g=m.find(p=>p.filename==="vote.yml"||p.filename.endsWith("/vote.yml")),w=m.find(p=>p.filename===g.filename.slice(0,-8)+"ballot.yml"),_=m.find(p=>p.filename===g.filename.slice(0,-8)+"public.pem");if(!g||!w||!_)throw new Error("That PR does not look like a vote PR");return Qn.set(e,`${d}/new/${u}/${g.filename.replace(/vote\.yml$/,"")}`),{voteFile:g,ballotFile:w,publicKeyFile:_}}function hn(e){return Qn.get(e)}function $i(e){let t=e.length,n;for(;t!=0;)n=Math.floor(Math.random()*t),t--,[e[t],e[n]]=[e[n],e[t]];return e}async function qi(e,t){const n={...t,headers:{...t?.headers,Accept:"application/vnd.github.raw"}};try{const{voteFile:r,ballotFile:a,publicKeyFile:i}=await Di(e,t),l=/^\+canShuffleCandidates:\s*true$/m.test(r.patch),f=o=>o.ok?o.text():Promise.reject(new Error(`Fetch error: ${o.status} ${o.statusText}`));return[fetch(a.contents_url,n).then(f).then(l?o=>{const s=Ui.exec(o);if(s==null)return console.warn("Cannot find the list of candidates to shuffle, ignoring..."),o;const c=s.index+s[0].length-1,h=[];let v,u,d=c;for(;;){if(u=d+1,d=o.indexOf(`
`,u),d===u){v+=`
`;continue}if(d===-1){u!==o.length&&(v+=o.slice(u-1));break}if(o[u]!==" "||o[u+1]!==" ")break;o[u+2]==="-"&&(v&&h.push(v),v=""),v+=o.slice(u-1,d)}return v&&h.push(v),o.slice(0,c)+$i(h).join("")+`
`+o.slice(u)}:void 0),fetch(i.contents_url,n).then(o=>o.ok?o.arrayBuffer():Promise.reject(new Error(`Fetch error: ${o.status} ${o.statusText}`))),()=>fetch(r.contents_url,n).then(f)]}catch(r){const a=Promise.reject(r);return[a,a]}}let Rt;function Bi({url:e,username:t,token:n},r){const a=t&&n?{headers:{Authorization:`Basic ${btoa(`${t}:${n}`)}`}}:void 0,i=e+a?.headers.Authorization;Rt!==i&&(Rt=i,qi(e,a).then(r,l=>(Rt=null,r(l))))}var Vi=T('<textarea readonly=""></textarea> <div><!></div> <button type="button">Copy to clipboard</button> <p>Cast a vote by pasting this on a <a target="_blank">new file on the vote branch</a>.</p>',1),ji=T('<textarea readonly="">Encrypting data… </textarea>'),Hi=T("<summary>Get encrypted ballot</summary> <!>",1);function Ki(e,t){Be(t,!1);let n=Q(t,"encryptDataPromise",8),r=Q(t,"url",8),a=D(),i=D();function l(s){A(a,n().then(c=>navigator.clipboard.writeText(c))),A(i,s!=null)}Gn(l),at();var f=Hi(),o=k(Z(f),2);et(o,n,s=>{var c=ji();S(s,c)},(s,c)=>{var h=Vi(),v=Z(h),u=k(v,2),d=P(u);et(d,()=>y(a),_=>{var p=We("Copying to the Clipboard…");S(_,p)},_=>{var p=We("Copied to the clipboard!");S(_,p)},(_,p)=>{var x=vi(),I=Z(x);{var B=O=>{var F=We();H(()=>ce(F,`An error occurred: ${j(y(p)),G(()=>y(p)?.message??y(p))??""}`)),S(O,F)};Qe(I,O=>{y(i)&&O(B)})}S(_,x)});var m=k(u,2),g=k(m,2),w=k(P(g));H(_=>{tt(v,y(c)),xi(w,"href",_)},[()=>(j(hn),j(r()),G(()=>hn(r())))]),it("click",m,l),S(s,h)},(s,c)=>{var h=We();H(()=>ce(h,`An error occurred: ${j(y(c)),G(()=>y(c)?.message??y(c))??""}`)),S(s,h)}),S(e,f),Ve()}var zi=T('<button type="submit">Next</button>'),Gi=T('<button type="submit" disabled>Loading public key…</button>'),Yi=T('<form><textarea name="ballot"></textarea> <!></form>'),Wi=T(`<p>Maybe consider providing an access token, authenticated API calls are more
      likely to succeed.</p>`),Ji=T("<p> </p> <!>",1),Qi=T("<p> </p>"),Xi=T("<summary>Fill in ballot</summary> <!>",1);function Zi(e,t){Be(t,!1);let n=Q(t,"url",8),r=Q(t,"username",8),a=Q(t,"token",8),i=Q(t,"registerBallot",8),l=D(),f=D(),o;function s(v){v.preventDefault();const u=this.elements.namedItem("ballot");i()(u.value,y(f),o)}A(l,A(f,Promise.reject("no data"))),Gn(()=>{Bi({url:n(),username:r(),token:a()},v=>{(u=>{var d=Er(u,3);A(l,d[0]),A(f,d[1]),o=d[2]})(v)})}),at();var c=Xi(),h=k(Z(c),2);et(h,()=>y(l),v=>{var u=Qi(),d=P(u);H(()=>ce(d,`...loading as ${r()||"anonymous"}`)),S(v,u)},(v,u)=>{var d=Yi(),m=P(d),g=k(m,2);et(g,()=>y(f),w=>{var _=Gi();S(w,_)},w=>{var _=zi();S(w,_)}),H(()=>tt(m,y(u))),it("submit",d,s),S(v,d)},(v,u)=>{var d=Ji(),m=Z(d),g=P(m),w=k(m,2);{var _=p=>{var x=Wi();S(p,x)};Qe(w,p=>{(!a()||!r())&&p(_)})}H(()=>ce(g,`An error occurred: ${j(y(u)),G(()=>y(u)?.message??y(u))??""}`)),S(v,d)}),S(e,c),Ve()}var ea=T(`<summary>GitHub credentials</summary> <p>If you are trying to vote on a private repository, or hitting GitHub API rate
  limits, you can supply a token for the API calls.</p> <form class="svelte-ttd1cx"><div class="svelte-ttd1cx"><label class="svelte-ttd1cx">Username: <input name="username"/></label> <label class="svelte-ttd1cx">Token: <input name="token" type="password" placeholder="gho_…"/></label> <button type="submit">Save</button></div></form> <p>The token should have at least the <code>repo</code> permissions.</p>`,1);function ta(e,t){Be(t,!1);let n=Q(t,"updateAuth",8),r=Q(t,"username",8),a=Q(t,"token",8);function i(u){u.preventDefault(),n()(this.username.value,this.token.value)}at();var l=ea(),f=k(Z(l),4),o=P(f),s=P(o),c=k(P(s)),h=k(s,2),v=k(P(h));H(()=>{tt(c,r()),tt(v,a())}),it("submit",f,i),S(e,l),Ve()}var na=T('<summary>Get URL to load the data</summary> <form class="svelte-bptx4u"><div class="svelte-bptx4u"><label class="svelte-bptx4u">URL: <input type="url" name="url" class="svelte-bptx4u"/></label> <input type="submit" value="Load data"/></div></form>',1);function ra(e,t){Be(t,!1);let n=Q(t,"url",8);function r(s){s.preventDefault(),globalThis.location.hash=this.elements.namedItem("url").value}at();var a=na(),i=k(Z(a),2),l=P(i),f=P(l),o=k(P(f));k(f,2),H(()=>tt(o,n())),it("submit",i,r),S(e,a),Ve()}const Xn={name:"RSA-OAEP",hash:"SHA-256"},Ie={name:"AES-CBC",length:256,saltSize:8},Ce={name:"PBKDF2",hash:"SHA-256",iterations:1e5,keySize:32,ivSize:16},ia=crypto,{subtle:de}=crypto;async function aa(e,t,...n){const r=await de.importKey("raw",e,Ce.name,!1,["deriveBits"]),a=await de.deriveBits({...Ce,salt:t},r,8*(Ce.ivSize+Ce.keySize)),i=await de.importKey("raw",new Uint8Array(a,0,Ce.keySize),Ie,!1,n),l=new Uint8Array(a,Ce.keySize);return{key:i,iv:l}}const la=new TextDecoder;function oa(e){const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0,a=e.length;r<a;r++)n[r]=e.charCodeAt(r);return t}const vt="-----BEGIN P";function sa(e){const t=ArrayBuffer.isView(e),n=new DataView(t?e.buffer:e,t?e.byteOffset:0,vt.length);for(let r=0;r<vt.length;r++)if(vt.charCodeAt(r)!==n.getUint8(r))return!1;return!0}function ua(e,t,n){let r;if(typeof t=="string"?t.startsWith(vt):sa(t)){typeof t!="string"&&(t=la.decode(t));const a=t.split("-----",3)[2].replace(/\s+/g,""),i=atob(a);r=oa(i)}else r=t;return de.importKey(e,r,Xn,!0,n)}function fa(e,t){return ua("spki",e,["encrypt"])}const ft=[83,97,108,116,101,100,95,95];async function ca(e){const t=await de.exportKey("raw",await de.generateKey(Ie,!0,["encrypt"])),n=ia.getRandomValues(new Uint8Array(Ie.saltSize)),{iv:r,key:a}=await aa(t,n,"encrypt"),i=await de.encrypt({...Ie,iv:r},a,e),l=new Uint8Array(ft.length+Ie.saltSize+i.byteLength);return l.set(ft),l.set(n,ft.length),l.set(new Uint8Array(i),ft.length+Ie.saltSize),{secret:t,saltedCiphertext:l}}async function va(e,t){const n=await fa(t),{saltedCiphertext:r,secret:a}=await ca(e);return{encryptedSecret:await de.encrypt({name:Xn.name},n,a),saltedCiphertext:r}}function _n(e){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=e.byteLength,a=r%3,i=r-a;let l,f,o,s,c;for(let h=0;h<i;h=h+3)c=e[h]<<16|e[h+1]<<8|e[h+2],l=(c&16515072)>>18,f=(c&258048)>>12,o=(c&4032)>>6,s=c&63,t+=n[l]+n[f]+n[o]+n[s];return a===1?(c=e[i],l=(c&252)>>2,f=(c&3)<<4,t+=n[l]+n[f]+"=="):a===2&&(c=e[i]<<8|e[i+1],l=(c&64512)>>10,f=(c&1008)>>4,o=(c&15)<<2,t+=n[l]+n[f]+n[o]+"="),t}var da=T("<h1>Caritat</h1> <details><!></details> <hr/> <details><!></details> <details><!></details> <details><!></details> <details><!></details>",1);function ha(e,t){Be(t,!1);var n=this&&this.__awaiter||function(M,ie,ee,Te){function Et(ze){return ze instanceof ee?ze:new ee(function(lt){lt(ze)})}return new(ee||(ee=Promise))(function(ze,lt){function Zn(me){try{xt(Te.next(me))}catch(St){lt(St)}}function er(me){try{xt(Te.throw(me))}catch(St){lt(St)}}function xt(me){me.done?ze(me.value):Et(me.value).then(Zn,er)}xt((Te=Te.apply(M,ie||[])).next())})},r;const a=typeof TextEncoder>"u"?{encode(){}}:new TextEncoder;let i=D(),l=D(new Promise(()=>{})),f=D(!1),o=D(new Promise(()=>{})),s,c=D((r=globalThis.location)===null||r===void 0?void 0:r.hash.slice(1)),h=D(""),v=D("");function u(M,ie){A(h,M),A(v,ie)}let d=D(y(c)?1:0);addEventListener("hashchange",()=>{var M;A(c,(M=globalThis.location)===null||M===void 0?void 0:M.hash.slice(1)),A(d,y(c)?Math.max(y(d),1):0)});function m(){A(o,y(f)&&y(i)?n(this,void 0,void 0,function*(){const[{getSummarizedBallot:M},ie]=yield Promise.all([rr(()=>import("./ballotSummary-BoRqIpwz.js"),[]),s().catch(ee=>console.warn(ee))]);return M(y(i),ie)}):new Promise(()=>{}))}function g(M,ie,ee){A(l,n(this,void 0,void 0,function*(){const{encryptedSecret:Te,saltedCiphertext:Et}=yield va(a.encode(M),yield ie);return JSON.stringify({encryptedSecret:_n(new Uint8Array(Te)),data:_n(Et)})})),A(i,M),s=ee,A(d,2),m()}function w(M){A(f,M.newState==="open"),m()}at();var _=da(),p=k(Z(_),2),x=P(p);ta(x,{updateAuth:u,get username(){return y(h)},get token(){return y(v)}});var I=k(p,4),B=P(I);ra(B,{get url(){return y(c)}});var O=k(I,2),F=P(O);Zi(F,{get url(){return y(c)},get username(){return y(h)},get token(){return y(v)},registerBallot:g});var N=k(O,2),pe=P(N);Fi(pe,{get ballotSummary(){return y(o)}});var se=k(N,2),Ke=P(se);Ki(Ke,{get ballot(){return y(i)},get encryptDataPromise(){return y(l)},get url(){return y(c)}}),H(()=>{I.open=y(d)===0,O.open=y(d)===1,N.open=y(f),se.open=y(d)===2}),it("toggle",N,w),S(e,_),Ve()}_i(ha,{target:document.getElementById("app")});
