/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function rn(n){return typeof n>"u"||n===null}function dn(n){return typeof n=="object"&&n!==null}function mn(n){return Array.isArray(n)?n:rn(n)?[]:[n]}function gn(n,i){var e,o,r,u;if(i)for(u=Object.keys(i),e=0,o=u.length;e<o;e+=1)r=u[e],n[r]=i[r];return n}function xn(n,i){var e="",o;for(o=0;o<i;o+=1)e+=n;return e}function An(n){return n===0&&Number.NEGATIVE_INFINITY===1/n}var vn=rn,yn=dn,Cn=mn,wn=xn,bn=An,kn=gn,C={isNothing:vn,isObject:yn,toArray:Cn,repeat:wn,isNegativeZero:bn,extend:kn};function on(n,i){var e="",o=n.reason||"(unknown reason)";return n.mark?(n.mark.name&&(e+='in "'+n.mark.name+'" '),e+="("+(n.mark.line+1)+":"+(n.mark.column+1)+")",!i&&n.mark.snippet&&(e+=`

`+n.mark.snippet),o+" "+e):o}function L(n,i){Error.call(this),this.name="YAMLException",this.reason=n,this.mark=i,this.message=on(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}L.prototype=Object.create(Error.prototype);L.prototype.constructor=L;L.prototype.toString=function(i){return this.name+": "+on(this,i)};var _=L;function B(n,i,e,o,r){var u="",l="",c=Math.floor(r/2)-1;return o-i>c&&(u=" ... ",i=o-c+u.length),e-o>c&&(l=" ...",e=o+c-l.length),{str:u+n.slice(i,e).replace(/\t/g,"→")+l,pos:o-i+u.length}}function P(n,i){return C.repeat(" ",i-n.length)+n}function _n(n,i){if(i=Object.create(i||null),!n.buffer)return null;i.maxLength||(i.maxLength=79),typeof i.indent!="number"&&(i.indent=1),typeof i.linesBefore!="number"&&(i.linesBefore=3),typeof i.linesAfter!="number"&&(i.linesAfter=2);for(var e=/\r?\n|\r|\0/g,o=[0],r=[],u,l=-1;u=e.exec(n.buffer);)r.push(u.index),o.push(u.index+u[0].length),n.position<=u.index&&l<0&&(l=o.length-2);l<0&&(l=o.length-1);var c="",f,h,s=Math.min(n.line+i.linesAfter,r.length).toString().length,t=i.maxLength-(i.indent+s+3);for(f=1;f<=i.linesBefore&&!(l-f<0);f++)h=B(n.buffer,o[l-f],r[l-f],n.position-(o[l]-o[l-f]),t),c=C.repeat(" ",i.indent)+P((n.line-f+1).toString(),s)+" | "+h.str+`
`+c;for(h=B(n.buffer,o[l],r[l],n.position,t),c+=C.repeat(" ",i.indent)+P((n.line+1).toString(),s)+" | "+h.str+`
`,c+=C.repeat("-",i.indent+s+3+h.pos)+`^
`,f=1;f<=i.linesAfter&&!(l+f>=r.length);f++)h=B(n.buffer,o[l+f],r[l+f],n.position-(o[l]-o[l+f]),t),c+=C.repeat(" ",i.indent)+P((n.line+f+1).toString(),s)+" | "+h.str+`
`;return c.replace(/\n$/,"")}var Sn=_n,In=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Tn=["scalar","sequence","mapping"];function Fn(n){var i={};return n!==null&&Object.keys(n).forEach(function(e){n[e].forEach(function(o){i[String(o)]=e})}),i}function En(n,i){if(i=i||{},Object.keys(i).forEach(function(e){if(In.indexOf(e)===-1)throw new _('Unknown option "'+e+'" is met in definition of "'+n+'" YAML type.')}),this.options=i,this.tag=n,this.kind=i.kind||null,this.resolve=i.resolve||function(){return!0},this.construct=i.construct||function(e){return e},this.instanceOf=i.instanceOf||null,this.predicate=i.predicate||null,this.represent=i.represent||null,this.representName=i.representName||null,this.defaultStyle=i.defaultStyle||null,this.multi=i.multi||!1,this.styleAliases=Fn(i.styleAliases||null),Tn.indexOf(this.kind)===-1)throw new _('Unknown kind "'+this.kind+'" is specified for "'+n+'" YAML type.')}var y=En;function H(n,i){var e=[];return n[i].forEach(function(o){var r=e.length;e.forEach(function(u,l){u.tag===o.tag&&u.kind===o.kind&&u.multi===o.multi&&(r=l)}),e[r]=o}),e}function On(){var n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},i,e;function o(r){r.multi?(n.multi[r.kind].push(r),n.multi.fallback.push(r)):n[r.kind][r.tag]=n.fallback[r.tag]=r}for(i=0,e=arguments.length;i<e;i+=1)arguments[i].forEach(o);return n}function U(n){return this.extend(n)}U.prototype.extend=function(i){var e=[],o=[];if(i instanceof y)o.push(i);else if(Array.isArray(i))o=o.concat(i);else if(i&&(Array.isArray(i.implicit)||Array.isArray(i.explicit)))i.implicit&&(e=e.concat(i.implicit)),i.explicit&&(o=o.concat(i.explicit));else throw new _("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.forEach(function(u){if(!(u instanceof y))throw new _("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(u.loadKind&&u.loadKind!=="scalar")throw new _("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(u.multi)throw new _("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),o.forEach(function(u){if(!(u instanceof y))throw new _("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(U.prototype);return r.implicit=(this.implicit||[]).concat(e),r.explicit=(this.explicit||[]).concat(o),r.compiledImplicit=H(r,"implicit"),r.compiledExplicit=H(r,"explicit"),r.compiledTypeMap=On(r.compiledImplicit,r.compiledExplicit),r};var Nn=U,Ln=new y("tag:yaml.org,2002:str",{kind:"scalar",construct:function(n){return n!==null?n:""}}),Mn=new y("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(n){return n!==null?n:[]}}),jn=new y("tag:yaml.org,2002:map",{kind:"mapping",construct:function(n){return n!==null?n:{}}}),Yn=new Nn({explicit:[Ln,Mn,jn]});function Dn(n){if(n===null)return!0;var i=n.length;return i===1&&n==="~"||i===4&&(n==="null"||n==="Null"||n==="NULL")}function Bn(){return null}function Pn(n){return n===null}var Rn=new y("tag:yaml.org,2002:null",{kind:"scalar",resolve:Dn,construct:Bn,predicate:Pn,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function $n(n){if(n===null)return!1;var i=n.length;return i===4&&(n==="true"||n==="True"||n==="TRUE")||i===5&&(n==="false"||n==="False"||n==="FALSE")}function Un(n){return n==="true"||n==="True"||n==="TRUE"}function qn(n){return Object.prototype.toString.call(n)==="[object Boolean]"}var Gn=new y("tag:yaml.org,2002:bool",{kind:"scalar",resolve:$n,construct:Un,predicate:qn,represent:{lowercase:function(n){return n?"true":"false"},uppercase:function(n){return n?"TRUE":"FALSE"},camelcase:function(n){return n?"True":"False"}},defaultStyle:"lowercase"});function Wn(n){return 48<=n&&n<=57||65<=n&&n<=70||97<=n&&n<=102}function Hn(n){return 48<=n&&n<=55}function Kn(n){return 48<=n&&n<=57}function zn(n){if(n===null)return!1;var i=n.length,e=0,o=!1,r;if(!i)return!1;if(r=n[e],(r==="-"||r==="+")&&(r=n[++e]),r==="0"){if(e+1===i)return!0;if(r=n[++e],r==="b"){for(e++;e<i;e++)if(r=n[e],r!=="_"){if(r!=="0"&&r!=="1")return!1;o=!0}return o&&r!=="_"}if(r==="x"){for(e++;e<i;e++)if(r=n[e],r!=="_"){if(!Wn(n.charCodeAt(e)))return!1;o=!0}return o&&r!=="_"}if(r==="o"){for(e++;e<i;e++)if(r=n[e],r!=="_"){if(!Hn(n.charCodeAt(e)))return!1;o=!0}return o&&r!=="_"}}if(r==="_")return!1;for(;e<i;e++)if(r=n[e],r!=="_"){if(!Kn(n.charCodeAt(e)))return!1;o=!0}return!(!o||r==="_")}function Vn(n){var i=n,e=1,o;if(i.indexOf("_")!==-1&&(i=i.replace(/_/g,"")),o=i[0],(o==="-"||o==="+")&&(o==="-"&&(e=-1),i=i.slice(1),o=i[0]),i==="0")return 0;if(o==="0"){if(i[1]==="b")return e*parseInt(i.slice(2),2);if(i[1]==="x")return e*parseInt(i.slice(2),16);if(i[1]==="o")return e*parseInt(i.slice(2),8)}return e*parseInt(i,10)}function Xn(n){return Object.prototype.toString.call(n)==="[object Number]"&&n%1===0&&!C.isNegativeZero(n)}var Zn=new y("tag:yaml.org,2002:int",{kind:"scalar",resolve:zn,construct:Vn,predicate:Xn,represent:{binary:function(n){return n>=0?"0b"+n.toString(2):"-0b"+n.toString(2).slice(1)},octal:function(n){return n>=0?"0o"+n.toString(8):"-0o"+n.toString(8).slice(1)},decimal:function(n){return n.toString(10)},hexadecimal:function(n){return n>=0?"0x"+n.toString(16).toUpperCase():"-0x"+n.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Qn=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Jn(n){return!(n===null||!Qn.test(n)||n[n.length-1]==="_")}function ni(n){var i,e;return i=n.replace(/_/g,"").toLowerCase(),e=i[0]==="-"?-1:1,"+-".indexOf(i[0])>=0&&(i=i.slice(1)),i===".inf"?e===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:i===".nan"?NaN:e*parseFloat(i,10)}var ii=/^[-+]?[0-9]+e/;function ei(n,i){var e;if(isNaN(n))switch(i){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===n)switch(i){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===n)switch(i){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(C.isNegativeZero(n))return"-0.0";return e=n.toString(10),ii.test(e)?e.replace("e",".e"):e}function ri(n){return Object.prototype.toString.call(n)==="[object Number]"&&(n%1!==0||C.isNegativeZero(n))}var oi=new y("tag:yaml.org,2002:float",{kind:"scalar",resolve:Jn,construct:ni,predicate:ri,represent:ei,defaultStyle:"lowercase"}),li=Yn.extend({implicit:[Rn,Gn,Zn,oi]}),ui=li,ln=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),un=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function ci(n){return n===null?!1:ln.exec(n)!==null||un.exec(n)!==null}function fi(n){var i,e,o,r,u,l,c,f=0,h=null,s,t,g;if(i=ln.exec(n),i===null&&(i=un.exec(n)),i===null)throw new Error("Date resolve error");if(e=+i[1],o=+i[2]-1,r=+i[3],!i[4])return new Date(Date.UTC(e,o,r));if(u=+i[4],l=+i[5],c=+i[6],i[7]){for(f=i[7].slice(0,3);f.length<3;)f+="0";f=+f}return i[9]&&(s=+i[10],t=+(i[11]||0),h=(s*60+t)*6e4,i[9]==="-"&&(h=-h)),g=new Date(Date.UTC(e,o,r,u,l,c,f)),h&&g.setTime(g.getTime()-h),g}function ti(n){return n.toISOString()}var ai=new y("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:ci,construct:fi,instanceOf:Date,represent:ti});function pi(n){return n==="<<"||n===null}var hi=new y("tag:yaml.org,2002:merge",{kind:"scalar",resolve:pi}),q=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function si(n){if(n===null)return!1;var i,e,o=0,r=n.length,u=q;for(e=0;e<r;e++)if(i=u.indexOf(n.charAt(e)),!(i>64)){if(i<0)return!1;o+=6}return o%8===0}function di(n){var i,e,o=n.replace(/[\r\n=]/g,""),r=o.length,u=q,l=0,c=[];for(i=0;i<r;i++)i%4===0&&i&&(c.push(l>>16&255),c.push(l>>8&255),c.push(l&255)),l=l<<6|u.indexOf(o.charAt(i));return e=r%4*6,e===0?(c.push(l>>16&255),c.push(l>>8&255),c.push(l&255)):e===18?(c.push(l>>10&255),c.push(l>>2&255)):e===12&&c.push(l>>4&255),new Uint8Array(c)}function mi(n){var i="",e=0,o,r,u=n.length,l=q;for(o=0;o<u;o++)o%3===0&&o&&(i+=l[e>>18&63],i+=l[e>>12&63],i+=l[e>>6&63],i+=l[e&63]),e=(e<<8)+n[o];return r=u%3,r===0?(i+=l[e>>18&63],i+=l[e>>12&63],i+=l[e>>6&63],i+=l[e&63]):r===2?(i+=l[e>>10&63],i+=l[e>>4&63],i+=l[e<<2&63],i+=l[64]):r===1&&(i+=l[e>>2&63],i+=l[e<<4&63],i+=l[64],i+=l[64]),i}function gi(n){return Object.prototype.toString.call(n)==="[object Uint8Array]"}var xi=new y("tag:yaml.org,2002:binary",{kind:"scalar",resolve:si,construct:di,predicate:gi,represent:mi}),Ai=Object.prototype.hasOwnProperty,vi=Object.prototype.toString;function yi(n){if(n===null)return!0;var i=[],e,o,r,u,l,c=n;for(e=0,o=c.length;e<o;e+=1){if(r=c[e],l=!1,vi.call(r)!=="[object Object]")return!1;for(u in r)if(Ai.call(r,u))if(!l)l=!0;else return!1;if(!l)return!1;if(i.indexOf(u)===-1)i.push(u);else return!1}return!0}function Ci(n){return n!==null?n:[]}var wi=new y("tag:yaml.org,2002:omap",{kind:"sequence",resolve:yi,construct:Ci}),bi=Object.prototype.toString;function ki(n){if(n===null)return!0;var i,e,o,r,u,l=n;for(u=new Array(l.length),i=0,e=l.length;i<e;i+=1){if(o=l[i],bi.call(o)!=="[object Object]"||(r=Object.keys(o),r.length!==1))return!1;u[i]=[r[0],o[r[0]]]}return!0}function _i(n){if(n===null)return[];var i,e,o,r,u,l=n;for(u=new Array(l.length),i=0,e=l.length;i<e;i+=1)o=l[i],r=Object.keys(o),u[i]=[r[0],o[r[0]]];return u}var Si=new y("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:ki,construct:_i}),Ii=Object.prototype.hasOwnProperty;function Ti(n){if(n===null)return!0;var i,e=n;for(i in e)if(Ii.call(e,i)&&e[i]!==null)return!1;return!0}function Fi(n){return n!==null?n:{}}var Ei=new y("tag:yaml.org,2002:set",{kind:"mapping",resolve:Ti,construct:Fi}),Oi=ui.extend({implicit:[ai,hi],explicit:[xi,wi,Si,Ei]}),I=Object.prototype.hasOwnProperty,M=1,cn=2,fn=3,j=4,R=1,Ni=2,K=3,Li=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Mi=/[\x85\u2028\u2029]/,ji=/[,\[\]\{\}]/,tn=/^(?:!|!!|![a-z\-]+!)$/i,an=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function z(n){return Object.prototype.toString.call(n)}function k(n){return n===10||n===13}function T(n){return n===9||n===32}function w(n){return n===9||n===32||n===10||n===13}function E(n){return n===44||n===91||n===93||n===123||n===125}function Yi(n){var i;return 48<=n&&n<=57?n-48:(i=n|32,97<=i&&i<=102?i-97+10:-1)}function Di(n){return n===120?2:n===117?4:n===85?8:0}function Bi(n){return 48<=n&&n<=57?n-48:-1}function V(n){return n===48?"\0":n===97?"\x07":n===98?"\b":n===116||n===9?"	":n===110?`
`:n===118?"\v":n===102?"\f":n===114?"\r":n===101?"\x1B":n===32?" ":n===34?'"':n===47?"/":n===92?"\\":n===78?"":n===95?" ":n===76?"\u2028":n===80?"\u2029":""}function Pi(n){return n<=65535?String.fromCharCode(n):String.fromCharCode((n-65536>>10)+55296,(n-65536&1023)+56320)}var pn=new Array(256),hn=new Array(256);for(var F=0;F<256;F++)pn[F]=V(F)?1:0,hn[F]=V(F);function Ri(n,i){this.input=n,this.filename=i.filename||null,this.schema=i.schema||Oi,this.onWarning=i.onWarning||null,this.legacy=i.legacy||!1,this.json=i.json||!1,this.listener=i.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=n.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function sn(n,i){var e={name:n.filename,buffer:n.input.slice(0,-1),position:n.position,line:n.line,column:n.position-n.lineStart};return e.snippet=Sn(e),new _(i,e)}function a(n,i){throw sn(n,i)}function Y(n,i){n.onWarning&&n.onWarning.call(null,sn(n,i))}var X={YAML:function(i,e,o){var r,u,l;i.version!==null&&a(i,"duplication of %YAML directive"),o.length!==1&&a(i,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(o[0]),r===null&&a(i,"ill-formed argument of the YAML directive"),u=parseInt(r[1],10),l=parseInt(r[2],10),u!==1&&a(i,"unacceptable YAML version of the document"),i.version=o[0],i.checkLineBreaks=l<2,l!==1&&l!==2&&Y(i,"unsupported YAML version of the document")},TAG:function(i,e,o){var r,u;o.length!==2&&a(i,"TAG directive accepts exactly two arguments"),r=o[0],u=o[1],tn.test(r)||a(i,"ill-formed tag handle (first argument) of the TAG directive"),I.call(i.tagMap,r)&&a(i,'there is a previously declared suffix for "'+r+'" tag handle'),an.test(u)||a(i,"ill-formed tag prefix (second argument) of the TAG directive");try{u=decodeURIComponent(u)}catch{a(i,"tag prefix is malformed: "+u)}i.tagMap[r]=u}};function S(n,i,e,o){var r,u,l,c;if(i<e){if(c=n.input.slice(i,e),o)for(r=0,u=c.length;r<u;r+=1)l=c.charCodeAt(r),l===9||32<=l&&l<=1114111||a(n,"expected valid JSON character");else Li.test(c)&&a(n,"the stream contains non-printable characters");n.result+=c}}function Z(n,i,e,o){var r,u,l,c;for(C.isObject(e)||a(n,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(e),l=0,c=r.length;l<c;l+=1)u=r[l],I.call(i,u)||(i[u]=e[u],o[u]=!0)}function O(n,i,e,o,r,u,l,c,f){var h,s;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),h=0,s=r.length;h<s;h+=1)Array.isArray(r[h])&&a(n,"nested arrays are not supported inside keys"),typeof r=="object"&&z(r[h])==="[object Object]"&&(r[h]="[object Object]");if(typeof r=="object"&&z(r)==="[object Object]"&&(r="[object Object]"),r=String(r),i===null&&(i={}),o==="tag:yaml.org,2002:merge")if(Array.isArray(u))for(h=0,s=u.length;h<s;h+=1)Z(n,i,u[h],e);else Z(n,i,u,e);else!n.json&&!I.call(e,r)&&I.call(i,r)&&(n.line=l||n.line,n.lineStart=c||n.lineStart,n.position=f||n.position,a(n,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(i,r,{configurable:!0,enumerable:!0,writable:!0,value:u}):i[r]=u,delete e[r];return i}function G(n){var i;i=n.input.charCodeAt(n.position),i===10?n.position++:i===13?(n.position++,n.input.charCodeAt(n.position)===10&&n.position++):a(n,"a line break is expected"),n.line+=1,n.lineStart=n.position,n.firstTabInLine=-1}function v(n,i,e){for(var o=0,r=n.input.charCodeAt(n.position);r!==0;){for(;T(r);)r===9&&n.firstTabInLine===-1&&(n.firstTabInLine=n.position),r=n.input.charCodeAt(++n.position);if(i&&r===35)do r=n.input.charCodeAt(++n.position);while(r!==10&&r!==13&&r!==0);if(k(r))for(G(n),r=n.input.charCodeAt(n.position),o++,n.lineIndent=0;r===32;)n.lineIndent++,r=n.input.charCodeAt(++n.position);else break}return e!==-1&&o!==0&&n.lineIndent<e&&Y(n,"deficient indentation"),o}function D(n){var i=n.position,e;return e=n.input.charCodeAt(i),!!((e===45||e===46)&&e===n.input.charCodeAt(i+1)&&e===n.input.charCodeAt(i+2)&&(i+=3,e=n.input.charCodeAt(i),e===0||w(e)))}function W(n,i){i===1?n.result+=" ":i>1&&(n.result+=C.repeat(`
`,i-1))}function $i(n,i,e){var o,r,u,l,c,f,h,s,t=n.kind,g=n.result,p;if(p=n.input.charCodeAt(n.position),w(p)||E(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(r=n.input.charCodeAt(n.position+1),w(r)||e&&E(r)))return!1;for(n.kind="scalar",n.result="",u=l=n.position,c=!1;p!==0;){if(p===58){if(r=n.input.charCodeAt(n.position+1),w(r)||e&&E(r))break}else if(p===35){if(o=n.input.charCodeAt(n.position-1),w(o))break}else{if(n.position===n.lineStart&&D(n)||e&&E(p))break;if(k(p))if(f=n.line,h=n.lineStart,s=n.lineIndent,v(n,!1,-1),n.lineIndent>=i){c=!0,p=n.input.charCodeAt(n.position);continue}else{n.position=l,n.line=f,n.lineStart=h,n.lineIndent=s;break}}c&&(S(n,u,l,!1),W(n,n.line-f),u=l=n.position,c=!1),T(p)||(l=n.position+1),p=n.input.charCodeAt(++n.position)}return S(n,u,l,!1),n.result?!0:(n.kind=t,n.result=g,!1)}function Ui(n,i){var e,o,r;if(e=n.input.charCodeAt(n.position),e!==39)return!1;for(n.kind="scalar",n.result="",n.position++,o=r=n.position;(e=n.input.charCodeAt(n.position))!==0;)if(e===39)if(S(n,o,n.position,!0),e=n.input.charCodeAt(++n.position),e===39)o=n.position,n.position++,r=n.position;else return!0;else k(e)?(S(n,o,r,!0),W(n,v(n,!1,i)),o=r=n.position):n.position===n.lineStart&&D(n)?a(n,"unexpected end of the document within a single quoted scalar"):(n.position++,r=n.position);a(n,"unexpected end of the stream within a single quoted scalar")}function qi(n,i){var e,o,r,u,l,c;if(c=n.input.charCodeAt(n.position),c!==34)return!1;for(n.kind="scalar",n.result="",n.position++,e=o=n.position;(c=n.input.charCodeAt(n.position))!==0;){if(c===34)return S(n,e,n.position,!0),n.position++,!0;if(c===92){if(S(n,e,n.position,!0),c=n.input.charCodeAt(++n.position),k(c))v(n,!1,i);else if(c<256&&pn[c])n.result+=hn[c],n.position++;else if((l=Di(c))>0){for(r=l,u=0;r>0;r--)c=n.input.charCodeAt(++n.position),(l=Yi(c))>=0?u=(u<<4)+l:a(n,"expected hexadecimal character");n.result+=Pi(u),n.position++}else a(n,"unknown escape sequence");e=o=n.position}else k(c)?(S(n,e,o,!0),W(n,v(n,!1,i)),e=o=n.position):n.position===n.lineStart&&D(n)?a(n,"unexpected end of the document within a double quoted scalar"):(n.position++,o=n.position)}a(n,"unexpected end of the stream within a double quoted scalar")}function Gi(n,i){var e=!0,o,r,u,l=n.tag,c,f=n.anchor,h,s,t,g,p,m=Object.create(null),A,x,b,d;if(d=n.input.charCodeAt(n.position),d===91)s=93,p=!1,c=[];else if(d===123)s=125,p=!0,c={};else return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=c),d=n.input.charCodeAt(++n.position);d!==0;){if(v(n,!0,i),d=n.input.charCodeAt(n.position),d===s)return n.position++,n.tag=l,n.anchor=f,n.kind=p?"mapping":"sequence",n.result=c,!0;e?d===44&&a(n,"expected the node content, but found ','"):a(n,"missed comma between flow collection entries"),x=A=b=null,t=g=!1,d===63&&(h=n.input.charCodeAt(n.position+1),w(h)&&(t=g=!0,n.position++,v(n,!0,i))),o=n.line,r=n.lineStart,u=n.position,N(n,i,M,!1,!0),x=n.tag,A=n.result,v(n,!0,i),d=n.input.charCodeAt(n.position),(g||n.line===o)&&d===58&&(t=!0,d=n.input.charCodeAt(++n.position),v(n,!0,i),N(n,i,M,!1,!0),b=n.result),p?O(n,c,m,x,A,b,o,r,u):t?c.push(O(n,null,m,x,A,b,o,r,u)):c.push(A),v(n,!0,i),d=n.input.charCodeAt(n.position),d===44?(e=!0,d=n.input.charCodeAt(++n.position)):e=!1}a(n,"unexpected end of the stream within a flow collection")}function Wi(n,i){var e,o,r=R,u=!1,l=!1,c=i,f=0,h=!1,s,t;if(t=n.input.charCodeAt(n.position),t===124)o=!1;else if(t===62)o=!0;else return!1;for(n.kind="scalar",n.result="";t!==0;)if(t=n.input.charCodeAt(++n.position),t===43||t===45)R===r?r=t===43?K:Ni:a(n,"repeat of a chomping mode identifier");else if((s=Bi(t))>=0)s===0?a(n,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?a(n,"repeat of an indentation width identifier"):(c=i+s-1,l=!0);else break;if(T(t)){do t=n.input.charCodeAt(++n.position);while(T(t));if(t===35)do t=n.input.charCodeAt(++n.position);while(!k(t)&&t!==0)}for(;t!==0;){for(G(n),n.lineIndent=0,t=n.input.charCodeAt(n.position);(!l||n.lineIndent<c)&&t===32;)n.lineIndent++,t=n.input.charCodeAt(++n.position);if(!l&&n.lineIndent>c&&(c=n.lineIndent),k(t)){f++;continue}if(n.lineIndent<c){r===K?n.result+=C.repeat(`
`,u?1+f:f):r===R&&u&&(n.result+=`
`);break}for(o?T(t)?(h=!0,n.result+=C.repeat(`
`,u?1+f:f)):h?(h=!1,n.result+=C.repeat(`
`,f+1)):f===0?u&&(n.result+=" "):n.result+=C.repeat(`
`,f):n.result+=C.repeat(`
`,u?1+f:f),u=!0,l=!0,f=0,e=n.position;!k(t)&&t!==0;)t=n.input.charCodeAt(++n.position);S(n,e,n.position,!1)}return!0}function Q(n,i){var e,o=n.tag,r=n.anchor,u=[],l,c=!1,f;if(n.firstTabInLine!==-1)return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=u),f=n.input.charCodeAt(n.position);f!==0&&(n.firstTabInLine!==-1&&(n.position=n.firstTabInLine,a(n,"tab characters must not be used in indentation")),!(f!==45||(l=n.input.charCodeAt(n.position+1),!w(l))));){if(c=!0,n.position++,v(n,!0,-1)&&n.lineIndent<=i){u.push(null),f=n.input.charCodeAt(n.position);continue}if(e=n.line,N(n,i,fn,!1,!0),u.push(n.result),v(n,!0,-1),f=n.input.charCodeAt(n.position),(n.line===e||n.lineIndent>i)&&f!==0)a(n,"bad indentation of a sequence entry");else if(n.lineIndent<i)break}return c?(n.tag=o,n.anchor=r,n.kind="sequence",n.result=u,!0):!1}function Hi(n,i,e){var o,r,u,l,c,f,h=n.tag,s=n.anchor,t={},g=Object.create(null),p=null,m=null,A=null,x=!1,b=!1,d;if(n.firstTabInLine!==-1)return!1;for(n.anchor!==null&&(n.anchorMap[n.anchor]=t),d=n.input.charCodeAt(n.position);d!==0;){if(!x&&n.firstTabInLine!==-1&&(n.position=n.firstTabInLine,a(n,"tab characters must not be used in indentation")),o=n.input.charCodeAt(n.position+1),u=n.line,(d===63||d===58)&&w(o))d===63?(x&&(O(n,t,g,p,m,null,l,c,f),p=m=A=null),b=!0,x=!0,r=!0):x?(x=!1,r=!0):a(n,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),n.position+=1,d=o;else{if(l=n.line,c=n.lineStart,f=n.position,!N(n,e,cn,!1,!0))break;if(n.line===u){for(d=n.input.charCodeAt(n.position);T(d);)d=n.input.charCodeAt(++n.position);if(d===58)d=n.input.charCodeAt(++n.position),w(d)||a(n,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(O(n,t,g,p,m,null,l,c,f),p=m=A=null),b=!0,x=!1,r=!1,p=n.tag,m=n.result;else if(b)a(n,"can not read an implicit mapping pair; a colon is missed");else return n.tag=h,n.anchor=s,!0}else if(b)a(n,"can not read a block mapping entry; a multiline key may not be an implicit key");else return n.tag=h,n.anchor=s,!0}if((n.line===u||n.lineIndent>i)&&(x&&(l=n.line,c=n.lineStart,f=n.position),N(n,i,j,!0,r)&&(x?m=n.result:A=n.result),x||(O(n,t,g,p,m,A,l,c,f),p=m=A=null),v(n,!0,-1),d=n.input.charCodeAt(n.position)),(n.line===u||n.lineIndent>i)&&d!==0)a(n,"bad indentation of a mapping entry");else if(n.lineIndent<i)break}return x&&O(n,t,g,p,m,null,l,c,f),b&&(n.tag=h,n.anchor=s,n.kind="mapping",n.result=t),b}function Ki(n){var i,e=!1,o=!1,r,u,l;if(l=n.input.charCodeAt(n.position),l!==33)return!1;if(n.tag!==null&&a(n,"duplication of a tag property"),l=n.input.charCodeAt(++n.position),l===60?(e=!0,l=n.input.charCodeAt(++n.position)):l===33?(o=!0,r="!!",l=n.input.charCodeAt(++n.position)):r="!",i=n.position,e){do l=n.input.charCodeAt(++n.position);while(l!==0&&l!==62);n.position<n.length?(u=n.input.slice(i,n.position),l=n.input.charCodeAt(++n.position)):a(n,"unexpected end of the stream within a verbatim tag")}else{for(;l!==0&&!w(l);)l===33&&(o?a(n,"tag suffix cannot contain exclamation marks"):(r=n.input.slice(i-1,n.position+1),tn.test(r)||a(n,"named tag handle cannot contain such characters"),o=!0,i=n.position+1)),l=n.input.charCodeAt(++n.position);u=n.input.slice(i,n.position),ji.test(u)&&a(n,"tag suffix cannot contain flow indicator characters")}u&&!an.test(u)&&a(n,"tag name cannot contain such characters: "+u);try{u=decodeURIComponent(u)}catch{a(n,"tag name is malformed: "+u)}return e?n.tag=u:I.call(n.tagMap,r)?n.tag=n.tagMap[r]+u:r==="!"?n.tag="!"+u:r==="!!"?n.tag="tag:yaml.org,2002:"+u:a(n,'undeclared tag handle "'+r+'"'),!0}function zi(n){var i,e;if(e=n.input.charCodeAt(n.position),e!==38)return!1;for(n.anchor!==null&&a(n,"duplication of an anchor property"),e=n.input.charCodeAt(++n.position),i=n.position;e!==0&&!w(e)&&!E(e);)e=n.input.charCodeAt(++n.position);return n.position===i&&a(n,"name of an anchor node must contain at least one character"),n.anchor=n.input.slice(i,n.position),!0}function Vi(n){var i,e,o;if(o=n.input.charCodeAt(n.position),o!==42)return!1;for(o=n.input.charCodeAt(++n.position),i=n.position;o!==0&&!w(o)&&!E(o);)o=n.input.charCodeAt(++n.position);return n.position===i&&a(n,"name of an alias node must contain at least one character"),e=n.input.slice(i,n.position),I.call(n.anchorMap,e)||a(n,'unidentified alias "'+e+'"'),n.result=n.anchorMap[e],v(n,!0,-1),!0}function N(n,i,e,o,r){var u,l,c,f=1,h=!1,s=!1,t,g,p,m,A,x;if(n.listener!==null&&n.listener("open",n),n.tag=null,n.anchor=null,n.kind=null,n.result=null,u=l=c=j===e||fn===e,o&&v(n,!0,-1)&&(h=!0,n.lineIndent>i?f=1:n.lineIndent===i?f=0:n.lineIndent<i&&(f=-1)),f===1)for(;Ki(n)||zi(n);)v(n,!0,-1)?(h=!0,c=u,n.lineIndent>i?f=1:n.lineIndent===i?f=0:n.lineIndent<i&&(f=-1)):c=!1;if(c&&(c=h||r),(f===1||j===e)&&(M===e||cn===e?A=i:A=i+1,x=n.position-n.lineStart,f===1?c&&(Q(n,x)||Hi(n,x,A))||Gi(n,A)?s=!0:(l&&Wi(n,A)||Ui(n,A)||qi(n,A)?s=!0:Vi(n)?(s=!0,(n.tag!==null||n.anchor!==null)&&a(n,"alias node should not have any properties")):$i(n,A,M===e)&&(s=!0,n.tag===null&&(n.tag="?")),n.anchor!==null&&(n.anchorMap[n.anchor]=n.result)):f===0&&(s=c&&Q(n,x))),n.tag===null)n.anchor!==null&&(n.anchorMap[n.anchor]=n.result);else if(n.tag==="?"){for(n.result!==null&&n.kind!=="scalar"&&a(n,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+n.kind+'"'),t=0,g=n.implicitTypes.length;t<g;t+=1)if(m=n.implicitTypes[t],m.resolve(n.result)){n.result=m.construct(n.result),n.tag=m.tag,n.anchor!==null&&(n.anchorMap[n.anchor]=n.result);break}}else if(n.tag!=="!"){if(I.call(n.typeMap[n.kind||"fallback"],n.tag))m=n.typeMap[n.kind||"fallback"][n.tag];else for(m=null,p=n.typeMap.multi[n.kind||"fallback"],t=0,g=p.length;t<g;t+=1)if(n.tag.slice(0,p[t].tag.length)===p[t].tag){m=p[t];break}m||a(n,"unknown tag !<"+n.tag+">"),n.result!==null&&m.kind!==n.kind&&a(n,"unacceptable node kind for !<"+n.tag+'> tag; it should be "'+m.kind+'", not "'+n.kind+'"'),m.resolve(n.result,n.tag)?(n.result=m.construct(n.result,n.tag),n.anchor!==null&&(n.anchorMap[n.anchor]=n.result)):a(n,"cannot resolve a node with !<"+n.tag+"> explicit tag")}return n.listener!==null&&n.listener("close",n),n.tag!==null||n.anchor!==null||s}function Xi(n){var i=n.position,e,o,r,u=!1,l;for(n.version=null,n.checkLineBreaks=n.legacy,n.tagMap=Object.create(null),n.anchorMap=Object.create(null);(l=n.input.charCodeAt(n.position))!==0&&(v(n,!0,-1),l=n.input.charCodeAt(n.position),!(n.lineIndent>0||l!==37));){for(u=!0,l=n.input.charCodeAt(++n.position),e=n.position;l!==0&&!w(l);)l=n.input.charCodeAt(++n.position);for(o=n.input.slice(e,n.position),r=[],o.length<1&&a(n,"directive name must not be less than one character in length");l!==0;){for(;T(l);)l=n.input.charCodeAt(++n.position);if(l===35){do l=n.input.charCodeAt(++n.position);while(l!==0&&!k(l));break}if(k(l))break;for(e=n.position;l!==0&&!w(l);)l=n.input.charCodeAt(++n.position);r.push(n.input.slice(e,n.position))}l!==0&&G(n),I.call(X,o)?X[o](n,o,r):Y(n,'unknown document directive "'+o+'"')}if(v(n,!0,-1),n.lineIndent===0&&n.input.charCodeAt(n.position)===45&&n.input.charCodeAt(n.position+1)===45&&n.input.charCodeAt(n.position+2)===45?(n.position+=3,v(n,!0,-1)):u&&a(n,"directives end mark is expected"),N(n,n.lineIndent-1,j,!1,!0),v(n,!0,-1),n.checkLineBreaks&&Mi.test(n.input.slice(i,n.position))&&Y(n,"non-ASCII line breaks are interpreted as content"),n.documents.push(n.result),n.position===n.lineStart&&D(n)){n.input.charCodeAt(n.position)===46&&(n.position+=3,v(n,!0,-1));return}if(n.position<n.length-1)a(n,"end of the stream or a document separator is expected");else return}function Zi(n,i){n=String(n),i=i||{},n.length!==0&&(n.charCodeAt(n.length-1)!==10&&n.charCodeAt(n.length-1)!==13&&(n+=`
`),n.charCodeAt(0)===65279&&(n=n.slice(1)));var e=new Ri(n,i),o=n.indexOf("\0");for(o!==-1&&(e.position=o,a(e,"null byte is not allowed in input")),e.input+="\0";e.input.charCodeAt(e.position)===32;)e.lineIndent+=1,e.position+=1;for(;e.position<e.length-1;)Xi(e);return e.documents}function Qi(n,i){var e=Zi(n,i);if(e.length!==0){if(e.length===1)return e[0];throw new _("expected a single document in the stream, but found more")}}var Ji=Qi,ne={load:Ji},J=ne.load;function nn(n){return n.replace(/([_~*\\[\]<>`])/g,"\\$1")}function en(n,i){if((n.endsWith(".")||n.endsWith(":"))&&(n=n.slice(0,-1)),n.includes("``")||n.includes("\\`"))return nn(n);const e=n.split("`");if(e.length%2===0)return nn(n);let o="";for(let r=0;r<e.length;r++){const u=r%2;o+=u?`\`${e[r]}\``:e[r].replace(/([_~*\\[\]<>])/g,"\\$1")}return o}const $=new Intl.ListFormat("en",{style:"long",type:"conjunction"});function ie(n,i=0){if(n.abstain)return"You are abstaining from this vote.";if(n.maxCandidates&&n.minCandidates){const{maxCandidates:o,minCandidates:r}=n;return`Your favorite option(s) is/are:
 - ${o.join(`.
 - `)}.

Your least favorite option(s) is/are:
 - ${r.join(`.
 - `)}.

Your are voting ${o.length<=r.length?"for "+$.format(o):"against "+$.format(r)}.`}const e=" ".repeat(i);return`Your favorite option(s) is/are:
 - ${n.orderedCandidates[0].join(`.
 - `)}.

Your least favorite option(s) is/are:
 - ${n.orderedCandidates.at(-1).join(`.
 - `)}.

The complete list of your preferences is:
`+n.orderedCandidates.map((o,r)=>`${e}${r+1}. ${$.format(o)}.`).join(`
`)}function ee(n,i){let e=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER;for(const[,l]of n.preferences)l>e&&(e=l),l<o&&(o=l);if(o===e)return{abstain:!0};const r=[],u=[];for(const[l,c]of n.preferences){if(c!==o&&c!==e){const h=new Map;for(const[s,t]of n.preferences){const g=h.get(t),p=`**${en(s)}**`;g==null?h.set(t,[p]):g.push(p)}return{orderedCandidates:Array.from(h).sort((s,t)=>t[0]-s[0]).map(([,s])=>s)}}(c===o?r:u).push(`**${en(l)}**`)}return{minCandidates:r,maxCandidates:u}}function re(n,i,e){let o=null;n.poolChecksum!==i.checksum&&((o??={}).invalidChecksum={expected:i.checksum,actual:n.poolChecksum}),n.author||((o??={}).missingAuthor=!0);const r=i.candidates.filter(l=>!n.preferences.some(c=>l===c.title));r.length&&((o??={}).missingCandidates=r);const u=n.preferences.filter(l=>!Number.isSafeInteger(l.score));return u.length&&((o??={}).candidatesWithInvalidScores=u),o}function oe(n,i){const e=J(n);if(!Array.isArray(e?.preferences))throw new Error("Ballot does not contain a list of preferences");let o;try{o=i&&re(e,J(i))}catch(r){console.warn(r)}return[ie(ee({preferences:e.preferences.map(({title:r,score:u})=>[r,u])})),o]}export{oe as getSummarizedBallot};
